; ==========================================================================
;  TeenAstro Unit Tests
;
;  Run ALL test suites:       pio test -d tests
;  Run one suite:             pio test -d tests --filter test_la3
;                             pio test -d tests --filter test_coord
;                             pio test -d tests --filter test_coordconv
;                             pio test -d tests --filter test_io
; ==========================================================================

[env:native]
platform = native
test_framework = unity

; -- Use PlatformIO-installed MinGW on Windows (no system gcc needed) --
platform_packages =
    toolchain-gccmingw32

build_flags =
    -std=c++14
    -D_USE_MATH_DEFINES
    -DUNITY_INCLUDE_DOUBLE
    -fpermissive
    ; ---- Arduino shim (so #include "arduino.h" resolves) ----
    -Ishim
    ; ---- Library headers ----
    -I../libraries/TeenAstroLA3
    -I../libraries/svd3
    -I../libraries/TeenAstroCoord
    -I../libraries/TeenAstroCoordConv
    ; ---- IO / Command libraries ----
    -I../libraries/TeenAstroCommandDef/src
    -I../libraries/TeenAstroLX200io/src
    -I../libraries/TeenAstroMath/src
    ; ---- Mount status (SHC alignment state machine) ----
    -I../libraries/TeenAstroMountStatus
    -I../libraries/TeenAstoCustomizations